<!DOCTYPE html>
<html>
<head>
  <title>Moral Dilemmas</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    .poll-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }
    .poll {
      width: 80%;
      margin-bottom: 20px;
    }
    .graph {
      height: 300px;
    }
    .options {
      margin-top: 10px;
    }
    .submit-button {
      margin-top: 20px;
      text-align: center;
    }
    .comment-box{
      margin-top : 10px;
    }

  </style>
</head>
<body>
  <h1><center>To what extent do you agree with John?  </center></h1>

  <div class="poll-container">
    <div class="poll">
      <h3>Scenario 1: John’s aging parents often require less sleep, and cause John to have to stay awake till late in the night to keep an eye on them. This is causing him sleep deprivation and a significant reduction in quality of life. His parents do not suffer from any adverse conditions by less sleep, and so refuse to take any medication. John has taken to adding some medically approved and safe medication to their dinners, and they have all been having a good night’s sleep since.</h3>
      <div class="graph">
        <canvas id="poll1-chart"></canvas>
      </div>
      <div class="options">
        <input type="radio" name="poll1-option" value="0"> 1
        <input type="radio" name="poll1-option" value="1"> 2 
        <input type="radio" name="poll1-option" value="2"> 3
        <input type="radio" name="poll1-option" value="3"> 4
      </div>
      <div class="comment-box">
        <textarea name="poll1-comment" rows="4" cols="40" placeholder="Leave a comment"></textarea>
      </div>
      <h4> Top comment: Since the medicine is not hurting his parents, it is better to have them all sleeping peacefully than solely John having to suffer </h4>
    </div>

    <div class="poll">
      <h3>Scenario 2: John works as a sous chef at a restaurant and has been taught everything he knows by mentor A. Mentor A has been a good friend and was recently promoted to a managerial position. John noticed they are doing horribly. There is a lot of mismanagement at the restaurant and an easily avoidable huge brunt of the work has been coming on his and the other workers’ shoulders for a few months now. On a particularly nasty day due to mismanagement, John reports manager A to the restaurant owner and manager A gets fired.</h3>
      <div class="graph">
        <canvas id="poll2-chart"></canvas>
      </div>
      <div class="options">
        <input type="radio" name="poll1-option" value="0"> 1
        <input type="radio" name="poll1-option" value="1"> 2
        <input type="radio" name="poll1-option" value="2"> 3
        <input type="radio" name="poll1-option" value="3"> 4
      </div>
      <div class="comment-box">
        <textarea name="poll1-comment" rows="4" cols="40" placeholder="Leave a comment"></textarea>
      </div>
      <h4> Top comment: Regardless of the situation, John should have remained loyal to the one who helped him. </h4>
    </div>

    <div class="poll">
      <h3>Scenario 3: John is driving on an extremely rainy and foggy night and is unable to see a barrier occupying his side of the road until he is too close to break in time. He has the option to switch lanes, but there is someone crossing the road. Switching lanes would kill them and not switching lanes would kill John. He switches the lane.</h3>
      <div class="graph">
        <canvas id="poll3-chart"></canvas>
      </div>
      <div class="options">
        <input type="radio" name="poll1-option" value="0"> 1
        <input type="radio" name="poll1-option" value="1"> 2
        <input type="radio" name="poll1-option" value="2"> 3
        <input type="radio" name="poll1-option" value="3"> 4
      </div>
      <div class="comment-box">
        <textarea name="poll1-comment" rows="4" cols="40" placeholder="Leave a comment"></textarea>
      </div>
      <h4> Top comment: It is a difficult decision but switching lanes deliberately is a little too close to killing. </h4>
    </div>

    <div class="poll">
      <h3>Scenario 4: John notices his 14-year-old child has been eating and talking less than they used to, and seems to be upset. He has tried asking them if something is wrong, and they have denied having any problems. John notices they have been spending more time on their device and suspects it may hold the answer to their altered behavior. In their absence, he opens their device and goes through their conversations. He is able to figure out what was wrong and help his child out. While the child was angry initially, they were then in a much-improved mental place. </h3>
      <div class="graph">
        <canvas id="poll4-chart"></canvas>
      </div>
      <div class="options">
        <input type="radio" name="poll1-option" value="0"> 1
        <input type="radio" name="poll1-option" value="1"> 2
        <input type="radio" name="poll1-option" value="2"> 3
        <input type="radio" name="poll1-option" value="3"> 4
      </div>
      <div class="comment-box">
        <textarea name="poll1-comment" rows="4" cols="40" placeholder="Leave a comment"></textarea>
      </div>
      <h4> Top comment: As with all humans, teenagers have a right to privacy that should not be so openly violated. </h4>
    </div>

    <div class="poll">
      <h3>Scenario 5: John works overtime a lot and ends up reaching too late to see his child on most days. When his child tells him it is upsetting, John promises he will return home in time to spend some time together. On his way home the next day, John encounters an old man who does not seem to be in the best condition. John takes the old man to the hospital and ends up breaking his promise to his child. </h3>
      <div class="graph">
        <canvas id="poll5-chart"></canvas>
      </div>
      <div class="options">
        <input type="radio" name="poll1-option" value="0"> 1
        <input type="radio" name="poll1-option" value="1"> 2
        <input type="radio" name="poll1-option" value="2"> 3
        <input type="radio" name="poll1-option" value="3"> 4
      </div>
      <div class="comment-box">
        <textarea name="poll1-comment" rows="4" cols="40" placeholder="Leave a comment"></textarea>
      </div>
      <h4> Top comment: It is unethical to break a promise, regardless of the circumstances.  </h4>
    </div>
  </div>

  <div class="submit-button">
    <button onclick="submitForm()">Submit</button>
  </div>

  <script>
    // Sample data for polls
    const pollData = [
      {
        question: "Previous Responses",
        options: ["1", "2", "3", "4"],
        votes: [3, 1, 1,8]
      },
      {
        question: "Previous Responses",
        options: ["1", "2", "3","4"],
        votes: [5, 2, 1,3]
      },
      {
        question: "Previous Responses",
        options: ["1", "2", "3","4"],
        votes: [3, 5, 4,3]
      },
      {
        question: "Previous Responses",
        options: ["1", "2", "3","4"],
        votes: [6, 2, 2,5]
      },
      {
        question: "Previous Responses",
        options: ["1", "2", "3","4"],
        votes: [7, 3, 2,5]
      }
    ];

    // Store user selections
    const userSelections = {};

    // Function to handle form submission
    function submitForm() {
      const pollForms = document.querySelectorAll('.poll');
      
      pollForms.forEach((pollForm, index) => {
        const pollId = `poll${index + 1}`;
        const selectedOption = pollForm.querySelector(`input[name=${pollId}-option]:checked`);
        
        if (selectedOption) {
          userSelections[pollId] = selectedOption.value;
        }
      });
      
      // Redirect to thank you page
      window.location.href = "thankyou.html";
    }

    // Generate charts for each poll
    pollData.forEach((poll, index) => {
      const chartId = `poll${index + 1}-chart`;
      const ctx = document.getElementById(chartId).getContext("2d");

      new Chart(ctx, {
        type: "bar",
        data: {
          labels: poll.options,
          datasets: [{
            label: poll.question,
            data: poll.votes,
            backgroundColor: [
              "rgba(255, 99, 132, 0.5)",
              "rgba(54, 162, 235, 0.5)",
              "rgba(75, 192, 192, 0.5)"
            ],
            borderColor: [
              "rgba(255, 99, 132, 1)",
              "rgba(54, 162, 235, 1)",
              "rgba(75, 192, 192, 1)"
            ],
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              stepSize: 1
            }
          }
        }
      });
    });
  </script>
</body>
</html>
